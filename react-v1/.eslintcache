[{"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reportWebVitals.js":"1","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/actions/queueActions.js":"2","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/constants/ActionTypes.js":"3","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/playbackReducer.js":"4","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/searchMiddleware.js":"5","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/index.js":"6","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/socketMiddleware.js":"7","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/store/store.js":"8","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/sessionMiddleware.js":"9","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/App.js":"10","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/Queue.js":"11","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/Header.js":"12","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/loggerMiddleware.js":"13","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/devicesMiddleware.js":"14","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/AddToQueue.js":"15","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/ButtonStyle.js":"16","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/ButtonDarkStyle.js":"17","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/Main.js":"18","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/actions/usersActions.js":"19","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/index.js":"20","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/sessionReducer.js":"21","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/playbackMiddleware.js":"22","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/actions/sessionActions.js":"23","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/usersReducer.js":"24"},{"size":362,"mtime":1609269360119,"results":"25","hashOfConfig":"26"},{"size":785,"mtime":1609365431772,"results":"27","hashOfConfig":"26"},{"size":1748,"mtime":1609290952014,"results":"28","hashOfConfig":"26"},{"size":1210,"mtime":1609365538331,"results":"29","hashOfConfig":"26"},{"size":1435,"mtime":1609296814301,"results":"30","hashOfConfig":"26"},{"size":630,"mtime":1609387505474,"results":"31","hashOfConfig":"26"},{"size":2369,"mtime":1609379364857,"results":"32","hashOfConfig":"26"},{"size":1310,"mtime":1609387883480,"results":"33","hashOfConfig":"26"},{"size":3906,"mtime":1609379289333,"results":"34","hashOfConfig":"26"},{"size":153,"mtime":1609382964070,"results":"35","hashOfConfig":"26"},{"size":1591,"mtime":1609374223208,"results":"36","hashOfConfig":"26"},{"size":3046,"mtime":1609373132067,"results":"37","hashOfConfig":"26"},{"size":107,"mtime":1609295493777,"results":"38","hashOfConfig":"26"},{"size":1703,"mtime":1609295407259,"results":"39","hashOfConfig":"26"},{"size":4515,"mtime":1609382248383,"results":"40","hashOfConfig":"26"},{"size":277,"mtime":1609382695399,"results":"41","hashOfConfig":"26"},{"size":180,"mtime":1609382692844,"results":"42","hashOfConfig":"26"},{"size":2001,"mtime":1609387934089,"results":"43","hashOfConfig":"26"},{"size":556,"mtime":1609378946109,"results":"44","hashOfConfig":"26"},{"size":1107,"mtime":1609379523961,"results":"45","hashOfConfig":"26"},{"size":1266,"mtime":1609365551093,"results":"46","hashOfConfig":"26"},{"size":1744,"mtime":1609296029580,"results":"47","hashOfConfig":"26"},{"size":801,"mtime":1609378942297,"results":"48","hashOfConfig":"26"},{"size":562,"mtime":1609365555375,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"1tm0da8",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"64"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"64"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"64"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":2,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"79","messages":"80","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"82"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"82"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"104","messages":"105","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reportWebVitals.js",[],["111","112"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/actions/queueActions.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/constants/ActionTypes.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/playbackReducer.js",["113"],"// * note: Reducers are functions that calculate a new state value based on previous state + an action\n\nimport {\n  FETCH_PLAYING_CONTEXT_SUCCESS,\n  PLAY_TRACK_SUCCESS,\n  QUEUE_ENDED,\n  MUTE_PLAYBACK,\n  UNMUTE_PLAYBACK,\n  UPDATE_NOW_PLAYING,\n} from \"../constants/ActionTypes.js\";\n\nconst initialState = {\n  muted: false,\n};\n\nexport default (state, action) => {\n  switch (action.type) {\n    case FETCH_PLAYING_CONTEXT_SUCCESS:\n      return {\n        ...state,\n        track: action.playingContext.track,\n        user: action.playingContext.user,\n        position: 0,\n      };\n    case PLAY_TRACK_SUCCESS:\n      return {\n        ...state,\n        track: action.track,\n        user: action.user,\n        position: action.position,\n        startTime: new Date(),\n      };\n    case UPDATE_NOW_PLAYING:\n      return {\n        ...state,\n        track: action.track,\n        user: action.user,\n        position: action.position,\n        startTime: new Date(),\n      };\n    case QUEUE_ENDED: {\n      return initialState;\n    }\n    case MUTE_PLAYBACK:\n      return { ...state, muted: true };\n    case UNMUTE_PLAYBACK:\n      return { ...state, muted: false };\n    default:\n      return state ? state : initialState;\n  }\n};\n",["114","115"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/searchMiddleware.js",["116","117"],"import fetch from \"isomorphic-unfetch\";\n\nimport { SEARCH_TRACKS } from \"../constants/ActionTypes.js\";\nimport { searchTracksSuccess } from \"../actions/searchActions.js\";\n\nconst SPOTIFY_API_BASE = \"https://api.spotify.com/v1\";\n\nconst searchTracks = (query) => (dispatch, getState) => {\n  // *** FOUND THE BELOW ON STACK OVERFLOW AS A TRICK TO IMPROVE SEARCH RESULTS USING A WILDCARD\n  // *** NOT WRITTEN BY TCS ***\n  let shouldAddWildcard = false;\n  if (query.length > 1) {\n    const words = query.split(\" \");\n    const lastWord = words[words.length - 1];\n    if (\n      /^[a-z0-9\\s]+$/i.test(lastWord) &&\n      query.lastIndexOf(\"*\") !== query.length - 1\n    ) {\n      shouldAddWildcard = true;\n    }\n  }\n\n  const wildcardQuery = `${query}${shouldAddWildcard ? \"*\" : \"\"}`;\n\n  return fetch(\n    `${SPOTIFY_API_BASE}/search?1=${encodeURIComponent(\n      wildcardQuery\n    )}&type=track&limit=10`,\n    {\n      // *** END CODE NOT WRITTEN BY TCS ***\n\n      headers: {\n        Authorization: `Bearer ` + getState().session.access_token,\n      },\n    }\n  )\n    .then((res) => res.json())\n    .then((res) => {\n      dispatch(searchTracksSuccess(query, res.tracks.items));\n    });\n};\n\nexport default (store) => (next) => (action) => {\n  const result = next(action);\n  switch (action.type) {\n    case SEARCH_TRACKS: {\n      return store.dispatch(searchTracks(action.query));\n      break;\n    }\n    default:\n      break;\n  }\n\n  return result;\n};\n",["118","119"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/index.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/socketMiddleware.js",["120"],"// REF: https://socket.io/get-started\n\nimport {\n  VOTE_UP,\n  LOGIN_SUCCESS,\n  QUEUE_REMOVE_TRACK,\n  QUEUE_TRACK,\n} from \"../constants/ActionTypes.js\";\nimport { updateUsers } from \"../actions/usersActions.js\";\nimport { updateQueue, queueEnded } from \"../actions/queueActions.js\";\nimport { playTrack, updateNowPlaying } from \"../actions/playbackActions.js\";\nimport Config from \"../config/app.js\";\n\nimport io from \"socket.io-client\";\n\nvar socket = null;\n\nconst getIdFromTrackString = (trackString = \"\") => {\n  let matches = trackString.match(/^https:\\/\\/open\\.spotify\\.com\\/track\\/(.*)/);\n  if (matches) {\n    return matches[1];\n  }\n\n  matches = trackString.match(/^https:\\/\\/play\\.spotify\\.com\\/track\\/(.*)/);\n  if (matches) {\n    return matches[1];\n  }\n\n  matches = trackString.match(/^spotify:track:(.*)/);\n  if (matches) {\n    return matches[1];\n  }\n\n  return null;\n};\n\nexport function socketMiddleware(store) {\n  return (next) => (action) => {\n    const result = next(action);\n\n    if (socket) {\n      switch (action.type) {\n        case QUEUE_TRACK: {\n          let trackId = getIdFromTrackString(action.id);\n          if (trackId === null) {\n            trackId = action.id;\n          }\n          socket.emit(\"queue track\", trackId);\n          break;\n        }\n        case QUEUE_REMOVE_TRACK: {\n          socket.emit(\"remove track\", action.id);\n          break;\n        }\n        case LOGIN_SUCCESS: {\n          const user = store.getState().session.user;\n          socket.emit(\"user login\", user);\n          break;\n        }\n        case VOTE_UP: {\n          socket.emit(\"vote up\", action.id);\n          break;\n        }\n        default:\n          break;\n      }\n    }\n\n    return result;\n  };\n}\n\nexport default function (store) {\n  socket = io.connect(Config.HOST);\n\n  socket.on(\"update queue\", (data) => {\n    store.dispatch(updateQueue(data));\n  });\n\n  socket.on(\"queue ended\", () => {\n    store.dispatch(queueEnded());\n  });\n\n  socket.on(\"play track\", (track, user, position) => {\n    // *** REMINDER: I should also set repeat to false\n    store.dispatch(playTrack(track, user, position));\n  });\n\n  socket.on(\"update users\", (data) => {\n    store.dispatch(updateUsers(data));\n  });\n\n  socket.on(\"update now playing\", (track, user, position) => {\n    store.dispatch(updateNowPlaying(track, user, position));\n  });\n\n  // *** to-do: manage end song, end queue\n}\n","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/store/store.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/sessionMiddleware.js",["121"],"import fetch from \"isomorphic-unfetch\";\n\nimport { LOAD, LOGIN } from \"../constants/ActionTypes.js\";\nimport {\n  loginSuccess,\n  updateCurrentUser,\n  updateTokenSuccess,\n} from \"../actions/sessionActions.js\";\n\nimport * as Config from \"../config/app.js\";\n\nconst SPOTIFY_API_BASE = \"https://api.spotify.com/v1\";\n\nconst getCurrentUser = () => (dispatch, getState) =>\n  fetch(`${SPOTIFY_API_BASE}/me`, {\n    headers: {\n      Authorization: \"Bearer \" + getState().session.access_token,\n    },\n  })\n    .then((res) => res.json())\n    .then((res) => {\n      dispatch(updateCurrentUser(res));\n    });\n\nconst updateToken = () => (dispatch, getState) => {\n  return fetch(`${Config.HOST}/auth/token`, {\n    method: \"POST\",\n    body: JSON.stringify({\n      refresh_token: getState().session.refresh_token,\n    }),\n    headers: new Headers({\n      \"Content-Type\": \"application/json\",\n    }),\n  })\n    .then((res) => res.json())\n    .then((res) => {\n      console.log(res);\n      dispatch(updateTokenSuccess(res.access_token));\n    });\n};\n\nexport default (store) => (next) => (action) => {\n  const result = next(action);\n  switch (action.type) {\n    case LOAD: {\n      const session = store.getState().session;\n      const expiresIn = session.expires_in;\n      const needsToUpdate =\n        !expiresIn || expiresIn - Date.now() < 10 * 60 * 1000;\n      if (needsToUpdate) {\n        console.log(`sessionMiddleware > needs to update access token`);\n        const refreshToken = session.refresh_token;\n        if (refreshToken) {\n          console.log(`sessionMiddleware > using refresh token`);\n          store\n            .dispatch(updateToken())\n            .then(() => {\n              return store.dispatch(getCurrentUser());\n            })\n            .then(() => {\n              store.dispatch(loginSuccess());\n            });\n        }\n      } else {\n        console.log(`sessionMiddleware > no need to update access token`);\n        store.dispatch(getCurrentUser()).then(() => {\n          store.dispatch(loginSuccess());\n        });\n      }\n      break;\n    }\n    case LOGIN: {\n      const getLoginURL = (scopes) => {\n        return `${Config.HOST}/auth/login?scope=${encodeURIComponent(\n          scopes.join(\" \")\n        )}`;\n      };\n\n      const width = 450,\n        height = 730,\n        left = window.screen.width / 2 - width / 2,\n        top = window.screen.height / 2 - height / 2;\n\n      const messageFunc = (event) => {\n        try {\n          const hash = JSON.parse(event.data);\n          if (hash.type === \"access_token\") {\n            window.removeEventListener(\"message\", messageFunc, false);\n            const accessToken = hash.access_token;\n            const expiresIn = hash.expires_in;\n            if (accessToken === \"\") {\n              // *** to-do: implement login error\n            } else {\n              const refreshToken = hash.refresh_token;\n              localStorage.setItem(\"refreshToken\", refreshToken);\n              localStorage.setItem(\"accessToken\", accessToken);\n              localStorage.setItem(\"expiresIn\", Date.now() + expiresIn * 1000);\n              store.dispatch(updateTokenSuccess(accessToken));\n              store\n                .dispatch(getCurrentUser())\n                .then(() => store.dispatch(loginSuccess()));\n            }\n          }\n        } catch (err) {\n          // do nothing\n          console.error(err);\n        }\n      };\n      window.addEventListener(\"message\", messageFunc, false);\n\n      const url = getLoginURL([\n        `user-read-playback-state`,\n        `user-modified-playback-state`,\n      ]);\n      window.open(\n        url,\n        \"Spotify\",\n        `menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=` +\n          width +\n          `, height=` +\n          height +\n          `, top=` +\n          top +\n          `, left=` +\n          left\n      );\n      break;\n    }\n\n    default:\n      break;\n  }\n\n  return result;\n};\n","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/App.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/Queue.js",["122","123"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/Header.js",["124","125","126"],"import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { login } from \"../actions/sessionActions.js\";\nimport { mutePlayback, unmutePlayback } from \"../actions/playbackActions.js\";\nimport ButtonStyle from \"./ButtonStyle.js\";\nimport ButtonDarkStyle from \"./ButtonDarkStyle.js\";\n\nconst linkStyle = {\n  lineHeight: \"30px\",\n  marginRight: 15,\n};\n\nconst mainLinkStyle = {\n  float: \"left\",\n  marginRight: \"10px\",\n};\n\nconst headerStyle = {\n  backgroundColor: \"#e3ebf4\",\n  padding: \"20px 40px\",\n};\n\nconst getNameFromUser = (user) => {\n  return user.display_name || user.id;\n};\n\nconst Header = ({ session, muted, mutePlayback, unmutePlayback, login }) => (\n  <div style={headerStyle}>\n    <a style={Object.assign({}, linkStyle, mainLinkStyle)}>\n      <img src=\"\" />\n    </a>\n    <a style={linkStyle}>ABOUT</a>\n    {session.user ? (\n      <div className=\"media user-header\">\n        <style jsx>{`\n          .user-header {\n            float: right;\n            width: 150px;\n          }\n          .user-image {\n            border-radius: 50%;\n          }\n          .user-name {\n            line-height: 30px;\n          }\n          .media,\n          .media__bd {\n            overflow: hidden;\n            _overflow: visible;\n            zoom: 1;\n          }\n          .media .media__img {\n            float: left;\n            margin-right: 10px;\n          }\n        `}</style>\n        <div className=\"media__img\">\n          <img\n            className=\"user-image\"\n            src={\n              (session.user.images &&\n                session.user.images.length &&\n                session.user.images[0].url) ||\n              \"/images/user-icon.png\"\n            }\n            width=\"30\"\n            height=\"30\"\n            alt={getNameFromUser(session.user)}\n          />\n        </div>\n        <div className=\"user-name media__bd\">\n          {getNameFromUser(session.user)}\n        </div>\n      </div>\n    ) : (\n      <button\n        className=\"btn btn--dark\"\n        style={{ float: \"right\" }}\n        onClick={login}\n      >\n        <style jsx>{ButtonStyle}</style>\n        <style jsx>{ButtonDarkStyle}</style>\n        LOGIN\n      </button>\n    )}\n    {session.user ? (\n      <div className=\"playback-control\">\n        <style jsx>{ButtonStyle}</style>\n        <style jsx>{ButtonDarkStyle}</style>\n        <style jsx>{`\n          .playback-control {\n            float: right;\n            width: 200px;\n          }\n        `}</style>\n        <button\n          className=\"btn btn--dark\"\n          onClick={() => {\n            muted ? unmutePlayback() : mutePlayback();\n          }}\n        >\n          {muted ? \"Unmute\" : \"Mute\"}\n        </button>\n      </div>\n    ) : null}\n  </div>\n);\n\nconst mapDispatchToProps = (dispatch) => ({\n  login: () => dispatch(login()),\n  mutePlayback: () => dispatch(mutePlayback()),\n  unmutePlayback: () => dispatch(unmutePlayback()),\n});\n\nconst mapStateToProps = (state) => ({\n  session: state.session,\n  muted: state.playback.muted,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n",["127","128"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/loggerMiddleware.js",["129","130"],"export default (store) => (next) => (action) => {\n  const result = next(action);\n  console.log(action);\n};\n","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/devicesMiddleware.js",["131"],"import fetch from \"isomorphic-unfetch\";\n\nimport {\n  FETCH_AVAILABLE_DEVICES,\n  TRANSFER_PLAYBACK_TO_DEVICE,\n} from \"../constants/ActionTypes.js\";\n\nimport {\n  fetchAvailableDevices,\n  fetchAvailableDevicesSuccess,\n  fetchAvailableDevicesError,\n  transferPlaybackToDeviceSuccess,\n  transferPlaybackToDeviceError,\n} from \"../actions/devicesActions.js\";\n\nconst SPOTIFY_API_BASE = \"https://api.spotify.com/v1\";\n\nexport default (store) => (next) => (action) => {\n  const result = next(action);\n  switch (action.type) {\n    case FETCH_AVAILABLE_DEVICES: {\n      fetch(`${SPOTIFY_API_BASE}/me/player/devices`, {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${store.getState().session.access_token}`,\n        },\n      })\n        .then((r) => r.json())\n        .then((r) => {\n          if (r.error) {\n            store.dispatch(fetchAvailableDevicesError(r.error));\n          } else {\n            store.dispatch(fetchAvailableDevicesSuccess(r.devices));\n          }\n        });\n      break;\n    }\n    case TRANSFER_PLAYBACK_TO_DEVICE: {\n      fetch(`${SPOTIFY_API_BASE}/me/player`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${store.getState().session.access_token}`,\n        },\n        body: JSON.stringify({\n          device_ids: [action.decideId],\n        }),\n      })\n        .then((r) => r.json())\n        .then((r) => {\n          if (r.error) {\n            store.dispatch(transferPlaybackToDeviceError(r.error));\n          } else {\n            store.dispatch(transferPlaybackToDeviceSuccess());\n            store.dispatch(fetchAvailableDevices());\n          }\n        });\n      break;\n    }\n\n    default:\n      break;\n  }\n\n  return result;\n};\n","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/AddToQueue.js",["132","133"],"import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { searchTracks, searchTracksReset } from \"../actions/searchActions.js\";\nimport { queueTrack } from \"../actions/queueActions.js\";\n\nclass ResultsList extends React.Component {\n  render() {\n    const { results, focus } = this.props;\n    return (\n      <ul className=\"add-to-queue__search-results\">\n        <style jsx>{`\n          .add-to-queue__search-results {\n            border: 1px solid #999;\n            list-style: none;\n            margin: 0;\n            padding: 0;\n          }\n          .add-to-queue__search-results-item {\n            padding: 5px 0 5px 5px;\n          }\n          .add-to-queue__search-results-item--focused {\n            background-color: #eee;\n          }\n          .container {\n            display: flex;\n          }\n          .album-img {\n            width: 64;\n            padding-right: 1em;\n          }\n          .flex-item {\n            flex-grow: 1;\n          }\n\n          .song-name {\n            font-size: 1.3em;\n            margin-bottom: 0.3em;\n          }\n        `}</style>\n        {results.map((r, index) => {\n          const isFocused = focus === index;\n          const className =\n            \"add-to-queue__search-results-item\" +\n            (isFocused ? \" add-to-queue__search-results-item--focused\" : \"\");\n          return (\n            <li\n              key={r.id}\n              className={className}\n              onClick={() => this.props.onSelect(r.id)}\n            >\n              <div className=\"container\">\n                <div className=\"album-img\">\n                  <img src={r.album.images[2].url} />\n                </div>\n                <div className=\"flex-item\">\n                  <div className=\"song-name\">{r.name}</div>\n                  <div>{r.artists[0].name}</div>\n                </div>\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nclass AddToQueue extends React.Component {\n  state = {\n    text: this.props.text || \"\",\n    focus: -1,\n  };\n\n  handleChange = (event) => {\n    const text = event.target.value;\n    this.setState({ text: text });\n    if (text !== \"\") {\n      this.props.searchTracks(text);\n    } else {\n      this.setState({ focus: -1 });\n      this.props.searchTracksReset();\n    }\n  };\n\n  handleSelectElement = (id) => {\n    this.setState({ text: \"\" });\n    this.props.queueTrack(id);\n    this.props.searchTracksReset();\n  };\n\n  handleFocus = (event) => {\n    if (event.target.value !== \"\") {\n      this.props.searchTracks(event.target.value);\n    }\n  };\n\n  handleKeyDown = (event) => {\n    // REF: https://keycode.info/\n    switch (event.keyCode) {\n      case 38: // up\n        this.setState({ focus: this.state.focus - 1 });\n        break;\n      case 40: // down\n        this.setState({ focus: this.state.focus + 1 });\n        break;\n      case 13: {\n        // enter / return\n        let correct = false;\n        if (this.state.focus !== -1) {\n          this.props.queueTrack(this.props.search.results[this.state.focus].id);\n          correct = true;\n        } else {\n          const text = event.target.value.trim();\n          if (text.length !== 0) {\n            this.props.queueTrack(text);\n            correct = true;\n          }\n        }\n        if (correct) {\n          this.setState({ text: \"\" });\n          this.props.searchTracksReset();\n          this.setState({ focus: -1 });\n        }\n        break;\n      }\n    }\n  };\n\n  render() {\n    const results = this.props.search.results;\n    return (\n      <div className=\"add-to-queue\">\n        <style jsx>{`\n          .add-to-queue__input {\n            padding: 5px;\n            width: 400px;\n          }\n        `}</style>\n        <input\n          className=\"add-to-queue__input\"\n          placeholder=\"placeholder...\"\n          value={this.state.text}\n          onChange={this.handleChange}\n          onKeyDown={this.handleKeyDown}\n          onFocus={this.handleFocus}\n        />\n        {results && (\n          <ResultsList\n            results={results}\n            onSelect={this.handleSelectElement}\n            focus={this.state.focus}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  queueTrack: (text) => dispatch(queueTrack(text)),\n  searchTracks: (query) => dispatch(searchTracks(query)),\n  searchTracksReset: () => dispatch(searchTracksReset()),\n});\n\nconst mapStateToProps = (state) => ({\n  search: state.search,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddToQueue);\n","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/ButtonStyle.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/ButtonDarkStyle.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/components/Main.js",["134"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/actions/usersActions.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/index.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/sessionReducer.js",["135"],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/middleware/playbackMiddleware.js",["136"],"import fetch from \"isomorphic-unfetch\";\n\nimport { PLAY_TRACK, UNMUTE_PLAYBACK } from \"../constants/ActionTypes.js\";\nimport { playTrack, playTrackSuccess } from \"../actions/playbackActions.js\";\n\nconst SPOTIFY_API_BASE = \"https://api.spotify.com/v1\";\n\nexport default (store) => (next) => (action) => {\n  const result = next(action);\n  switch (action.type) {\n    case PLAY_TRACK: {\n      if (process.browser && !store.getState().playback.muted) {\n        fetch(`${SPOTIFY_API_BASE}/me/player/play`, {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Bearer ${store.getState().session.access_token}`,\n          },\n          body: JSON.stringify({\n            uris: [`spotify:track:${action.track.id}`],\n          }),\n        }).then(() => {\n          if (action.position) {\n            fetch(\n              `${SPOTIFY_API_BASE}/me/player/seek?position_ms=${action.position}`,\n              {\n                method: \"PUT\",\n                headers: {\n                  Authorization: `Bearer ${\n                    store.getState().session.access_token\n                  }`,\n                },\n              }\n            ).then(() => {\n              store.dispatch(\n                playTrackSuccess(action.track, action.user, action.position)\n              );\n            });\n          } else {\n            store.dispatch(playTrackSuccess(action.track, action.user));\n          }\n        });\n      }\n      break;\n    }\n    case UNMUTE_PLAYBACK: {\n      const { track, user, position, startTime } = store.getState().playback;\n      const currentPosition = Date.now() - startTime + position;\n      store.dispatch(playTrack(track, user, currentPosition));\n      break;\n    }\n    default:\n      break;\n  }\n\n  return result;\n};\n","/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/actions/sessionActions.js",[],"/Users/tcsamuelson/DEV/_seir/projects/project-week-3/listen-along-app/react-v1/src/reducers/usersReducer.js",["137"],{"ruleId":"138","replacedBy":"139"},{"ruleId":"140","replacedBy":"141"},{"ruleId":"142","severity":1,"message":"143","line":16,"column":1,"nodeType":"144","endLine":51,"endColumn":3},{"ruleId":"138","replacedBy":"145"},{"ruleId":"140","replacedBy":"146"},{"ruleId":"142","severity":1,"message":"143","line":43,"column":1,"nodeType":"144","endLine":55,"endColumn":3},{"ruleId":"147","severity":1,"message":"148","line":48,"column":7,"nodeType":"149","messageId":"150","endLine":48,"endColumn":13},{"ruleId":"138","replacedBy":"151"},{"ruleId":"140","replacedBy":"152"},{"ruleId":"142","severity":1,"message":"153","line":73,"column":1,"nodeType":"144","endLine":98,"endColumn":2},{"ruleId":"142","severity":1,"message":"143","line":42,"column":1,"nodeType":"144","endLine":135,"endColumn":3},{"ruleId":"154","severity":2,"message":"155","line":15,"column":12,"nodeType":"156","endLine":15,"endColumn":28},{"ruleId":"154","severity":2,"message":"155","line":19,"column":14,"nodeType":"156","endLine":19,"endColumn":30},{"ruleId":"157","severity":1,"message":"158","line":29,"column":5,"nodeType":"159","endLine":29,"endColumn":60},{"ruleId":"160","severity":1,"message":"161","line":30,"column":7,"nodeType":"159","endLine":30,"endColumn":21},{"ruleId":"157","severity":1,"message":"158","line":32,"column":5,"nodeType":"159","endLine":32,"endColumn":26},{"ruleId":"138","replacedBy":"162"},{"ruleId":"140","replacedBy":"163"},{"ruleId":"142","severity":1,"message":"143","line":1,"column":1,"nodeType":"144","endLine":4,"endColumn":3},{"ruleId":"164","severity":1,"message":"165","line":2,"column":9,"nodeType":"166","messageId":"167","endLine":2,"endColumn":15},{"ruleId":"142","severity":1,"message":"143","line":18,"column":1,"nodeType":"144","endLine":65,"endColumn":3},{"ruleId":"160","severity":1,"message":"161","line":54,"column":19,"nodeType":"159","endLine":54,"endColumn":54},{"ruleId":"168","severity":1,"message":"169","line":100,"column":5,"nodeType":"170","messageId":"171","endLine":127,"endColumn":6},{"ruleId":"164","severity":1,"message":"172","line":5,"column":10,"nodeType":"166","messageId":"167","endLine":5,"endColumn":19},{"ruleId":"142","severity":1,"message":"143","line":15,"column":1,"nodeType":"144","endLine":45,"endColumn":3},{"ruleId":"142","severity":1,"message":"143","line":8,"column":1,"nodeType":"144","endLine":56,"endColumn":3},{"ruleId":"142","severity":1,"message":"143","line":24,"column":1,"nodeType":"144","endLine":31,"endColumn":3},"no-native-reassign",["173"],"no-negated-in-lhs",["174"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration",["173"],["174"],"no-unreachable","Unreachable code.","BreakStatement","unreachableCode",["173"],["174"],"Unexpected default export of anonymous function","react/jsx-no-undef","'FormattedMessage' is not defined.","JSXIdentifier","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.",["173"],["174"],"no-unused-vars","'result' is assigned a value but never used.","Identifier","unusedVar","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","'initStore' is defined but never used.","no-global-assign","no-unsafe-negation"]